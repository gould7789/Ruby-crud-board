<!DOCTYPE html>
<html>
  <head>
    <%# 1. 페이지 제목 설정 %>
    <%# 각 페이지에서 content_for(:title)을 보내면 그걸 쓰고, 없으면 "Crud Board"를 씀 %>
    <title><%= content_for(:title) || "Crud Board" %></title>

    <%# 모바일 반응형 설정 %>
    <%# 스마트폰에서 화면 배율을 1:1로 맞춰서 글씨가 작게 깨지는 걸 막아줌 %>
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <%# 3. PWA(웹앱) 관련 설정 %>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Crud Board">
    <meta name="mobile-web-app-capable" content="yes">

    <%# 4. 보안 설정(CSRF) %>
    <%# 해커가 가짜 폼을 전손하은 것을 막아주는 레일즈의 보안 토큰 %>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%# 5. 헤더 슬롯 %>
    <%# 특정 페이지에서 <head> 태그 안에 뭔가 더 넣고 싶을 때 사용 %>
    <%= yield :head %>

    <%# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!) %>
    <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

    <%# 아이콘(Favicon) 설정 %>
    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">

    <%# 7. 부트스트랩(Bootstrap) 연결 %>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <%# 8. 레일즈 기본 스타일/스크립트 연결 %>
    <%# Includes all stylesheet files in app/assets/stylesheets %>
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
    <%# 9. 네비게이션 바 (상단 메뉴) %>
    <%# navbar-expand-lg: 화면이 클 때(Large)는 메뉴를 펼치고, 작으면 숨김 %>
    <%# navbar-dark bg-dark: 어두운 배경(bg)에 밝은 글씨(navbar) 테마 적용 %>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
      <%# container: 내용물이 양쪽 끝에 붙지 않게 중앙 정렬 %>
      <div class="container">
        <%# 로고: 클릭하면 게시글 목록(posts_path)으로 이동 %>
        <%= link_to 'CRUD Board', posts_path, class: 'navbar-brand' %>

        <%# 햄버거 버튼(모바일용) %>
        <%# 화면이 작아지면 메뉴 대신 나타나는 버튼 %>
        <%# data-bs-target="#navbarNav": 이 버튼을 누르면 id="navbarNav"를  접었다 폈다%>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>

        <%# 숨겨지는 메뉴 영역 %>
        <div class="collapse navbar-collapse" id="navbarNav">
          <%# ms-auto: Margin Start Auto (왼쪽 여배기을 최대로 줘서 메뉴를 오른쪽으로 밀어버림) %>
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <%= link_to '전체 글 보기', posts_path, class: 'nav-link' %>
            </li>

            <li class="nav-item">
              <%= link_to  "글 쓰기", new_post_path, class:"nav-link" %>
            </li>

          </ul>
        </div>
      </div>
    </nav>

    <%# 10. 본문 내용 (Container) %>
    <%# container: 내용을 화면 중앙에 모아줌 %>
    <%# mt-5: Margin Top 5 (메뉴바와 본문 사이의 간격을 띄워줌) %>
    <div class="container mt-5">
      <%# yield: 여기가 바로 '도화지' %>
      <%# index.html.erb, new.html.erb 등의 내용이 이 자리에 끼워져서 보임 %>
      <%= yield %>
    </div>
  </body>
</html>
